- project:
    templates:
      - openstack-python-jobs
      - openstack-python35-jobs
      - publish-openstack-sphinx-docs
      - check-requirements
      - release-notes-jobs
      - openstackclient-plugin-jobs
    check:
      jobs:
        - python-saharaclient-scenario
        - python-saharaclient-tempest
    gate:
      queue: sahara
      jobs:
        - python-saharaclient-scenario
        - python-saharaclient-tempest
    post:
      jobs:
        - openstack-tox-cover
    experimental:
      jobs:
        - openstack-tox-pypy

- job:
    name: python-saharaclient-scenario
    description: |
      Run scenario tests for Sahara against python-saharaclient changes.
    parent: sahara-tests-scenario
    required-projects:
      - openstack/python-saharaclient
    vars:
      devstack_localrc:
        LIBS_FROM_GIT: python-saharaclient
      sahara_scenario_tox_env: venv-py2

- job:
    name: python-saharaclient-tempest
    description: |
      Run Tempest tests from the Sahara plugin against python-saharaclient
      changes.
    parent: sahara-tests-tempest
    required-projects:
      - openstack/python-saharaclient
    vars:
      devstack_localrc:
        LIBS_FROM_GIT: python-saharaclient
